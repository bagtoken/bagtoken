# from your repo root
printf "%s\n" '/* $BAG AudioManager â€” one source of truth. Kills legacy money track, respects autoplay rules. */(function(){const VER=(new URLSearchParams(location.search)).get("__av")||"";const oldHints=["here-come-the-money.mp3","money","cash"];const _play=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){try{const p=_play.apply(this,arguments);return p&&p.catch?p.catch(()=>{}):p;}catch(_){return Promise.resolve();}};const BUS=window.BAG_AUDIO=window.BAG_AUDIO||{unlocked:false,tracks:{},unlock(){if(this.unlocked)return;try{const t=new Audio();t.muted=true;t.playsInline=true;t.play().then(()=>{t.pause();this.unlocked=true;}).catch(()=>{});}catch(_){}} ,stop(name){const a=this.tracks[name];if(!a)return;try{a.pause();a.currentTime=0;}catch(_){}} ,killLegacy(el){const src=(el&&(el.currentSrc||el.src))||"";if(!src)return;if(oldHints.some(h=>src.includes(h))){try{el.pause();el.currentTime=0;}catch(_){}}} ,async play(name,url,{loop=false,volume=1.0}={}){if(!this.unlocked)this.unlock();let a=this.tracks[name];if(!(a instanceof Audio)){a=new Audio();a.preload="auto";a.playsInline=true;this.tracks[name]=a;}const needs=url+(url.includes("?")?"&":"?")+"v="+(VER||Date.now());const bound=a.currentSrc||a.src||"";if(bound&&(bound.startsWith("blob:")||!bound.includes(url.split("?")[0]))){try{URL.revokeObjectURL(bound);}catch(_){ }a.removeAttribute("src");a.load();}a.src=needs;a.loop=!!loop;a.volume=Math.max(0,Math.min(1,volume));document.addEventListener("play",e=>this.killLegacy(e.target),true);a.currentTime=0;return a.play();}};const G=["pointerdown","touchstart","mousedown","keydown"];function onG(){BUS.unlock();G.forEach(t=>window.removeEventListener(t,onG,true));}G.forEach(t=>window.addEventListener(t,onG,{capture:true,passive:true}));window.BAG_AUDIO_VIS=function(el,fn,thr=0.6){const io=new IntersectionObserver(es=>es.forEach(e=>{if(e.isIntersecting&&e.intersectionRatio>=thr)fn();}),{threshold:thr});if(el)io.observe(el);return io;};document.addEventListener("DOMContentLoaded",()=>{const meta=document.querySelector(\'meta[name="bag:audio"]\');if(!meta)return;const url=meta.getAttribute("content");if(!url)return;const loop=meta.getAttribute("data-loop")!=="0";const vol=parseFloat(meta.getAttribute("data-volume")||"1");BUS.play("page",url,{loop,volume:isNaN(vol)?1:vol});});})();' > assets/js/audio-manager.js

git add assets/js/audio-manager.js
git commit -m "feat(audio): add site-wide AudioManager and legacy money-track kill"
git push
