<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>$BAG Plinko</title>

<link rel="preconnect" href="https://api.coingecko.com" crossorigin>
<script src="https://xaman.app/assets/cdn/xumm.min.js"></script>

<!-- Force same ‚Äúwiring‚Äù contract as Dice: allow live unless demo is forced elsewhere -->
<script>window.__BAG_FORCE_DEMO = false;</script>

<style>
  *{box-sizing:border-box}
  :root{
    --gold:#ffd700;--bg:#020703;--panel:#0b1b13;--panel2:#0d2217;--muted:#aeb7af;--fg:#f5f7f4;
    --green:#2fbf6b;--green2:#34c759;--line:#173524;--shadow:rgba(0,0,0,.35);
    --red:#e25b5b;
  }
  html,body{margin:0;background:var(--bg);color:var(--fg);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;line-height:1.55}
  img{display:block;max-width:100%;height:auto}
  button,input{font-size:16px}

  .back-casino {
    position: fixed; top: 18px; left: 18px; z-index: 1000;
    background: linear-gradient(180deg,#ffe175 0%, #f5c94c 100%);
    color: #08130d; text-decoration: none; font-weight: 800;
    padding: 8px 14px; border-radius: 10px; box-shadow: 0 4px 0 #b08a19; transition: all .15s ease;
  }
  .back-casino:hover { filter: brightness(1.05); box-shadow: 0 4px 0 #b08a19, 0 14px 28px rgba(255,225,117,.22); }
  .back-casino:active { transform: translateY(1px); box-shadow: 0 3px 0 #9a7315; }
  @media (max-width: 640px){ .back-casino{ font-size:.9rem; padding:7px 12px; } }

  .game-header{text-align:center;padding:36px 10px 14px}
  .game-header img.hero-img{margin-bottom:10px;filter:drop-shadow(0 10px 24px rgba(46,191,107,.18))}
  .game-header h2{font-size:clamp(1.6rem,5vw,2.2rem);margin:6px 0 0}
  @media (min-width: 900px){
    .game-header img.hero-img{ width: 34vw; max-width: 420px; margin-left: auto; margin-right: auto; }
  }
  @media (max-width: 899px) {
    .game-header img.hero-img { display:block; margin:0 auto; }
  }

  .game-teaser{padding:10px 16px 60px;background:
    radial-gradient(1200px 600px at 10% -10%, #0e2c1d 0%, transparent 60%),
    radial-gradient(900px 500px at 110% 20%, #0b2318 0%, transparent 55%),#060806;
    border-top:1px solid #131313;border-bottom:1px solid #131313}
  .game-wrap{max-width:1080px;margin:0 auto;display:grid;grid-template-columns:1.12fr .88fr;gap:22px}
  @media (max-width:900px){.game-wrap{grid-template-columns:1fr}}

  .panel{background:linear-gradient(180deg,var(--panel) 0%,var(--panel2) 100%);border:1px solid var(--line);border-radius:16px;box-shadow:0 8px 24px var(--shadow)}
  .mock{padding:16px}
  .section-title{font-weight:800;font-size:1.2rem;margin:0 0 12px}

  .stack{display:grid;gap:10px}
  .choice{display:flex;gap:10px;flex-wrap:wrap}
  .chip{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;border:1px solid #2b6a48;background:#0e2a1c;color:#e9efe9;font-weight:800}
  .chip input{accent-color:#2fbf6b}
  .mono{font-variant-numeric:tabular-nums}
  .micro{font-size:.85rem;color:#aeb7af}
  .muted{color:#cfd6cf}
  .divider{height:1px;background:#123221;margin:10px 0}
  .callout{margin-top:12px;padding:12px;border:1px dashed #29543d;border-radius:12px;background:#0c2418;color:#e4efe7}

  /* ‚úÖ Quick amount buttons (like Dice) */
  .preset-chips{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
  .preset-chip{
    appearance:none;border:1px solid #249a55;background:#2fbf6b;color:#ffffff;border-radius:999px;
    padding:8px 12px;font-weight:900;letter-spacing:.2px;cursor:pointer;
    box-shadow:0 4px 10px rgba(47,191,107,.18), inset 0 1px 0 rgba(255,255,255,.12);
    transition:transform .06s ease, box-shadow .2s ease, filter .2s ease;
  }
  .preset-chip:hover{filter:brightness(1.03)}
  .preset-chip:active{transform:translateY(1px);box-shadow:0 3px 8px rgba(47,191,107,.16), inset 0 1px 0 rgba(255,255,255,.1)}
  .preset-chip:focus-visible{outline:2px solid #ffffff; outline-offset:2px}
  .preset-chip.active{box-shadow:0 0 0 2px rgba(255,255,255,.25) inset, 0 8px 22px rgba(47,191,107,.25)}

  /* Buttons */
  .btn-roll{
    width:100%;margin-top:12px;padding:16px 22px;font-size:1.15rem;font-weight:900;text-transform:uppercase;
    letter-spacing:.5px;border:0;border-radius:14px;color:#08130d;background:linear-gradient(180deg,#ffe175 0%, #f5c94c 100%);
    box-shadow:0 6px 0 #b08a19, 0 16px 32px rgba(255,225,117,.18), inset 0 1px 0 rgba(255,255,255,.35);
    transition:transform .06s ease, box-shadow .2s ease, filter .2s ease; cursor:pointer;
  }
  .btn-roll:hover{filter:brightness(1.05);box-shadow:0 6px 0 #b08a19, 0 22px 40px rgba(255,225,117,.26), inset 0 1px 0 rgba(255,255,255,.4)}
  .btn-roll:active{transform:translateY(2px);box-shadow:0 4px 0 #9a7315, 0 12px 24px rgba(255,225,117,.2), inset 0 1px 0 rgba(255,255,255,.3)}
  .btn-roll:disabled{opacity:.65;cursor:not-allowed;transform:none;box-shadow:0 6px 0 #6e6e6e, 0 10px 20px rgba(0,0,0,.2)!important}

  /* HUD pills */
  .hud{ display:none }
  .pill{background:#0a1e15;border:1px solid #244330;border-radius:999px;padding:6px 10px;font-size:12px;color:#cfe6d8}
  .hudbar{display:flex;gap:6px;flex-wrap:wrap;align-items:center;margin:6px 0 10px;pointer-events:auto;}
  .hudbar .pill b{font-weight:800}

  /* Win readout */
  .win-readout{
    position:absolute; inset:auto 0 18%; margin:auto; width:min(82%,520px);
    display:none; justify-content:center; align-items:center;
    padding:14px 18px; border-radius:14px;
    background:linear-gradient(180deg,rgba(255,226,135,.18),rgba(0,0,0,.05));
    border:1px solid rgba(255,226,135,.35);
    box-shadow:0 12px 44px rgba(255,226,135,.18), inset 0 1px 0 rgba(255,255,255,.25);
    color:#fff2bf; font-weight:900; font-size:1.15rem; text-shadow:0 2px 8px rgba(0,0,0,.45);
    pointer-events:none;
  }
  .win-readout.show{ display:flex; animation:pop .55s ease; }
  .win-amt{ margin-left:8px; color:#ffd700; font-weight:900 }
  .win-sub{ margin-left:10px; opacity:.85; font-weight:700; font-size:.95rem }

  /* Stage / Board */
  .stage{position:relative;display:flex;align-items:center;justify-content:center;overflow:hidden;margin-top:10px}
  .canvas-wrap{
    position:relative;width:100%;max-width:720px;aspect-ratio:3/4;border-radius:14px;
    box-shadow:0 10px 30px rgba(0,0,0,.28), inset 0 1px 0 rgba(255,255,255,.04);
    background: radial-gradient(120% 120% at 50% 0%, #0b2016 0%, #07120d 60%, #060a08 100%);
  }
  canvas{position:absolute;inset:0;width:100%;height:100%}

  /* Pulses / shake */
  .canvas-wrap.win-pulse{ animation:winPulse 900ms ease; }
  .canvas-wrap.jp-pulse{ animation:jackpotPulse 1200ms ease; }
  @keyframes winPulse{
    0%{box-shadow:0 10px 30px rgba(0,0,0,.28), 0 0 0 0 rgba(186,242,205,.0), inset 0 1px 0 rgba(255,255,255,.04)}
    25%{box-shadow:0 10px 30px rgba(0,0,0,.28), 0 0 32px 8px rgba(186,242,205,.35), inset 0 1px 0 rgba(255,255,255,.08)}
    100%{box-shadow:0 10px 30px rgba(0,0,0,.28), 0 0 0 0 rgba(186,242,205,.0), inset 0 1px 0 rgba(255,255,255,.04)}
  }
  @keyframes jackpotPulse{
    0%{box-shadow:0 10px 30px rgba(0,0,0,.28), 0 0 0 0 rgba(255,215,0,.0), inset 0 1px 0 rgba(255,255,255,.04)}
    20%{box-shadow:0 10px 30px rgba(0,0,0,.28), 0 0 44px 12px rgba(255,215,0,.45), inset 0 1px 0 rgba(255,255,255,.1)}
    100%{box-shadow:0 10px 30px rgba(0,0,0,.28), 0 0 0 0 rgba(255,215,0,.0), inset 0 1px 0 rgba(255,255,255,.04)}
  }
  .thud-shake{ animation:thud 420ms cubic-bezier(.34,.01,.22,1); }
  @keyframes thud{
    0%{ transform:translateY(0) }
    18%{ transform:translateY(6px) }
    36%{ transform:translateY(-3px) }
    54%{ transform:translateY(2px) }
    72%{ transform:translateY(-1px) }
    100%{ transform:translateY(0) }
  }

  .cele{position:absolute;inset:0;display:none;align-items:center;justify-content:center;font-size:42px;font-weight:900;color:#ffe28c;text-shadow:0 4px 14px rgba(0,0,0,.6)}
  .cele.show{display:flex;animation:pop .9s ease}
  @keyframes pop{0%{transform:scale(.7);opacity:0}50%{transform:scale(1.06);opacity:1}100%{transform:scale(1)}}

  /* Rules pill */
  .rules-fab{
    position:fixed; right:16px; bottom:16px; z-index:1000;
    padding:10px 14px; border-radius:999px; font-weight:800;
    border:1px solid #2b6a48; background:#0e2a1c; color:#e9efe9;
    box-shadow:0 8px 24px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.06);
    cursor:pointer; user-select:none; -webkit-user-select:none;
  }
  .rules-fab:hover{ filter:brightness(1.05); }
  .rules-fab:active{ transform:translateY(1px); }
  .rules-fab:focus-visible{ outline:2px solid #e9efe9; outline-offset:2px; }

  .rules-overlay{
    position: fixed; inset: 0; display: none; place-items: center; z-index: 3000;
    backdrop-filter: blur(6px); background: rgba(0,0,0,.45); padding: 18px;
  }
  .rules-modal{
    width: min(680px, 92vw); max-height: min(78vh, 840px); overflow:auto;
    background: linear-gradient(180deg,var(--panel) 0%, var(--panel2) 100%);
    border: 1px solid var(--line); border-radius: 16px; box-shadow: 0 24px 60px var(--shadow);
    color: var(--fg); padding: 18px; position:relative;
  }
  .rules-modal h3{ margin: 0 0 10px; }
  .rules-modal ul{ margin: 10px 0; padding-left: 20px; }
  .rules-modal .rules-note{ margin-top: 10px; color: var(--muted); }
  .rules-close{ position:absolute; top:8px; right:12px; border:0; background:transparent; color:#e9efe9; font-size:24px; line-height:1; cursor:pointer; }
  .rules-close:hover{ filter:brightness(1.15); }

  /* Live-dot colors (same as Dice) */
  #liveDot.ok{color:#2fbf6b}
  #liveDot.warn{color:#e8a85c}
  #liveDot.err{color:#e25b5b}
</style>

<!-- Shared overlay (for win popup) -->
<script src="/js/bag-overlay.js"></script>

</head>
<body>

<a href="/casino/" class="back-casino" aria-label="Back to Casino">‚¨Ö Back to Casino</a>

<section class="game-header">
<picture>
  <source type="image/webp"
          srcset="/casino/assets/img/bag-plinko-960.webp 960w, /casino/assets/img/bag-plinko-1024.webp 1024w"
          sizes="(min-width:1024px) 960px, 100vw">
  <img class="hero-img"
    src="/casino/assets/img/bag-plinko-1024.png"
    srcset="/casino/assets/img/bag-plinko-960.png 960w, /casino/assets/img/bag-plinko-1024.png 1024w"
    sizes="(min-width:1024px) 960px, 100vw"
    alt="$BAG Plinko ‚Äî header"
    width="1024" height="576"
    loading="lazy" decoding="async">
</picture>

  <h2>ü™ô $BAG Plinko</h2>
  <p class="micro" style="margin-top:4px;opacity:.9;">
    üí∞ <strong>All payouts are in $BAG.</strong> $XRP bets convert automatically at the live rate.
  </p>
</section>

<section class="game-teaser" aria-labelledby="game-teaser-title">
  <div class="game-wrap">

    <!-- LEFT PANEL -->
    <div class="panel mock" id="bagPlinko">
      <div id="demo-badge" style="display:none;position:relative;margin:6px 0 10px 0;font:600 12px/1 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;letter-spacing:.3px;">
        <span style="padding:6px 10px;border:1px solid #aaa;border-radius:6px;opacity:.9;">PRACTICE MODE ‚Äî No real bets or payouts</span>
      </div>

      <div id="connectRow" style="display:flex;justify-content:space-between;align-items:center;margin:-2px 0 10px 0;">
        <div id="connectStatus" class="micro" style="opacity:.9">Wallet: <span style="color:#e8a85c">not connected</span></div>
        <button id="connectBtn"
          style="padding:10px 14px;font-weight:800;border:0;border-radius:12px;color:#08130d;background:linear-gradient(180deg,#ffe175 0%, #f5c94c 100%);box-shadow:0 4px 0 #b08a19;cursor:pointer;">
          Connect Xaman
        </button>
      </div>

      <div id="sessionRow" style="display:flex;justify-content:space-between;align-items:center;margin:6px 0 10px 0%;">
        <div id="sessionStatus" class="micro" style="opacity:.9">Session: <span style="color:#e8a85c">not started</span></div>
        <div style="display:flex;gap:8px;align-items:center">
          <button id="startSessionBtn" style="padding:8px 12px;font-weight:800;border:0;border-radius:10px;color:#08130d;background:linear-gradient(180deg,#ffe175 0%, #f5c94c 100%);box-shadow:0 3px 0 #b08a19;cursor:pointer;">Start Session</button>
          <button id="topUpBtn" style="padding:8px 12px;font-weight:800;border:0;border-radius:10px;color:#08130d;background:linear-gradient(180deg,#ffe175 0%, #f5c94c 100%);box-shadow:0 3px 0 #b08a19;cursor:pointer;display:none;">Top Up</button>
          <button id="endSessionBtn" style="padding:8px 12px;font-weight:800;border:0;border-radius:10px;background:#15261c;color:#dfe9e2;border:1px solid #2b6a48;cursor:pointer;display:none;">End</button>
        </div>
      </div>

      <div class="section-title">Stake & Prices</div>

      <div class="stake-box">
        <div class="stack">
          <div>
            <div class="micro">Amount</div>
            <div style="display:flex;align-items:center;gap:6px">
              <input id="usdBet" class="mono" type="tel" inputmode="decimal" pattern="[0-9.]*"
                min="0" max="2000" step="0.01" placeholder="0.00" aria-label="Stake in USD"
                style="width:140px;background:#0b2217;border:1px solid #1b4a2f;border-radius:10px;color:#f3f5f0;padding:10px">
              <span class="micro" aria-hidden="true">USD</span>
            </div>

            <!-- Quick amount buttons (Dice style) -->
            <div class="preset-chips" id="usdPresets" role="group" aria-label="Quick bet">
              <button type="button" class="preset-chip" data-usd="1">$1</button>
              <button type="button" class="preset-chip" data-usd="2">$2</button>
              <button type="button" class="preset-chip" data-usd="5">$5</button>
              <button type="button" class="preset-chip" data-usd="10">$10</button>
              <button type="button" class="preset-chip" data-usd="20">$20</button>
              <button type="button" class="preset-chip" data-usd="50">$50</button>
              <button type="button" class="preset-chip" data-usd="100">$100</button>
              <button type="button" class="preset-chip" data-usd="max">Max</button>
            </div>
          </div>

          <div>
            <div class="micro">Bet currency</div>
            <div class="choice" id="curToggle" role="radiogroup" aria-label="Bet currency">
              <label class="chip"><input type="radio" name="betCur" value="XRP" checked> XRP</label>
              <label class="chip"><input type="radio" name="betCur" value="BAG"> BAG</label>
            </div>
          </div>

          <div>
            <div class="micro">Bet amount</div>
            <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center">
              <div>
                <input id="demoBet" class="mono" type="tel" inputmode="decimal" pattern="[0-9.]*" min="0" step="any" value="1" aria-label="Stake units"
                  style="width:140px;background:#0b2217;border:1px solid #1b4a2f;border-radius:10px;color:#f3f5f0;padding:10px">
                <span class="unit">XRP</span>
              </div>
            </div>
          </div>

          <div class="divider"></div>

          <div class="micro">Live prices</div>
          <div class="muted mono" id="liveLine" aria-live="polite">
            <span id="liveDot" class="warn">‚óè</span>
            <span> BAG $<span id="liveBAG">‚Äî</span> ¬∑ XRP $<span id="liveXRP">‚Äî</span> <span id="liveNote"></span></span>
            <div class="micro" id="liveConv" style="margin-top:4px;opacity:.9;">1 BAG ‚âà ‚Äî XRP ¬∑ 1 XRP ‚âà ‚Äî BAG</div>
            <div id="bagDiag" class="micro" style="opacity:.55;margin-top:4px;"></div>
          </div>

          <div class="divider"></div>

          <div class="micro">Game state</div>
          <div class="muted" id="stateText">Ready ‚Äî tap Drop to start</div>

          <!-- Payouts -->
          <div class="callout mono" id="payoutBox">
            <div class="payout-grid">
              <div class="row"><div class="lab"><strong>Scratch</strong> (0√ó):</div><div class="val">‚Äî</div></div>
              <div class="row"><div class="lab"><strong>Win</strong> (1.25√ó):</div><div class="val">‚Äî <span class="micro" id="payWinGain" style="opacity:.9"></span></div></div>
              <div class="row"><div class="lab"><strong>Jackpot</strong> (2.00√ó):</div><div class="val">‚Äî <span class="micro" id="payJackpotGain" style="opacity:.9"></span></div></div>
            </div>
            <div class="micro" style="margin-top:6px;opacity:.85;">
              Drop lands in a slot: Scratch (lose), Win (1.25√ó), or Jackpot (2.00√ó). Payouts settle in BAG.
            </div>
            <div class="micro" style="margin-top:6px;opacity:.75;">Min $1 ¬∑ Max $2,000</div>
          </div>

          <p class="micro" style="margin:6px 0 0;opacity:.85">üëá Tap anywhere on the board to choose where the coin drops. Use ‚Üê/‚Üí to aim; press Space or tap <b>Drop</b>.</p>

          <!-- Board -->
          <div class="stage">
            <div class="canvas-wrap" id="boardWrap">
              <!-- ‚ùå Removed board-skin underlay per ‚Äúbehave like Dice‚Äù -->
              <canvas id="game" aria-label="Plinko board"></canvas>
              <div class="hud" aria-hidden="true">
                <span class="pill">Mode: <b>Demo</b></span>
                <span class="pill">Balance: <b>100.00</b> <span>XRP</span></span>
                <span class="pill">Bet: <b>1</b></span>
                <span class="pill">Last: <b>‚Äî</b></span>
              </div>
              <div id="winReadout" class="win-readout" aria-live="polite">
                <span id="winTitle">YOU WIN!</span>
                <span class="win-amt" id="winAmt">+0.00 BAG</span>
                <span class="win-sub" id="winUsd">(+$0.00)</span>
              </div>
              <div id="cele" class="cele" aria-live="polite"></div>
            </div>
          </div>

          <!-- Drop Button -->
          <div style="margin-top:18px;text-align:center">
            <button id="dropBtn" class="btn-roll" style="width:min(360px,90%)">Drop Coin</button>
          </div>

          <!-- HUD under the Drop button -->
          <div class="hudbar" id="balHud" style="justify-content:center;">
            <span class="pill">Balance: <b id="balLbl">‚Äî</b> <span id="ccyLbl">BAG</span></span>
          </div>
          <div class="hudbar" id="metaHud" style="justify-content:center; margin-top:-4px;">
            <span class="pill">Mode: <b id="modeLbl">Demo</b></span>
            <span class="pill">Bet: <b id="betLbl">1</b></span>
            <span class="pill">Last: <b id="lastLbl">‚Äî</b></span>
          </div>

          <div class="micro" style="text-align:center;opacity:.7;margin-top:6px">
            üîä If you don‚Äôt hear sound: tap DROP once, turn off Silent, and raise volume.
          </div>
        </div>
      </div>

      <!-- RIGHT PANEL REMOVED -->

    </div>
</section>

<!-- Rules FAB + Modal -->
<button class="rules-fab" id="rulesFab" aria-haspopup="dialog" aria-controls="rulesOverlay">‚ÑπÔ∏è Rules</button>
<div class="rules-overlay" id="rulesOverlay" role="dialog" aria-modal="true" aria-labelledby="rulesTitle">
  <div class="rules-modal" role="document">
    <button class="rules-close" id="rulesClose" aria-label="Close">√ó</button>
    <h3 id="rulesTitle">ü™ô Plinko ‚Äî Quick Rules</h3>
    <ul>
      <li>Tap <b>Drop Coin</b> (or press Space) to release a token.</li>
      <li>It bounces down pegs into a slot: <b>Scratch</b> (lose), <b>1.25√ó</b> (win), or <b>2√ó</b> (jackpot).</li>
      <li>All payouts settle in <b>$BAG</b>. XRP bets auto-convert at the live rate.</li>
      <li>Min $1 ¬∑ Max $2,000 per drop.</li>
    </ul>
    <div class="rules-note">Visuals and payouts shown on this page apply. Practice mode uses a shared demo balance.</div>
  </div>
</div>

<!-- === AUDIO ENGINE (unchanged) === -->
<script>
/* ‚Ä¶ (IDENTICAL AUDIO ENGINE FROM YOUR LAST VERSION) ‚Ä¶ */
</script>

<!-- === WALLET CONNECT (same as Dice) === -->
<script>
/* ‚Ä¶ (IDENTICAL Xaman connect block from your last version) ‚Ä¶ */
</script>

<!-- === PRICES (AMM first, same cache keys/flow as Dice) === -->
<script>
/* ‚Ä¶ (IDENTICAL PRICES block from your last version) ‚Ä¶ */
</script>

<!-- === UNIVERSAL DEMO SESSION (shared across games) === -->
<script src="/js/bag-demo-session.js"></script>
<script>
/* Fallback demo session if external file fails ‚Äî same as Dice */
(function(){
  if (window.__bagSession) return;
  const LS_KEY = '__bag_demo_bag_v2';
  const EVT = (n,d)=>{ try{ window.dispatchEvent(new CustomEvent(n,{detail:d})); }catch{} };
  function load(){ try{ return Math.max(0, Number(localStorage.getItem(LS_KEY)||'100')); }catch{ return 100; } }
  function save(v){ try{ localStorage.setItem(LS_KEY, String(Math.max(0, Number(v)||0))); }catch{} }
  let bag = load();
  window.__bagSession = {
    mode:'demo',
    active(){return true},
    get(){return {bag, xrp:0}},
    start(){EVT('bag:sessionStarted',{mode:'demo'})},
    topup(a=100){ bag+=Number(a)||0; save(bag); EVT('bag:sessionToppedUp',{bag}); return true; },
    end(){EVT('bag:sessionEnded'); return true;},
    spend(a){ a=Number(a)||0; if(a<=0||bag<a) return false; bag-=a; save(bag); EVT('bag:hudRefresh'); return true; },
    credit(a){ a=Number(a)||0; if(a<=0) return false; bag+=a; save(bag); EVT('bag:hudRefresh'); return true; }
  };
  // Keep Dice parity: do not force demo unless external requires it
})();
</script>

<!-- === PRICES/STAKE SYNC + PAYOUTS (same as Dice math/UI) === -->
<script>
/* ‚Ä¶ (IDENTICAL stake & payouts sync block from your last version) ‚Ä¶ */
</script>

<!-- === QUICK AMOUNT BUTTONS (USD) === -->
<script>
/* ‚Ä¶ (IDENTICAL presets block from your last version) ‚Ä¶ */
</script>

<!-- === PLINKO GAME LOGIC (unchanged gameplay, just no skin) === -->
<script>
/* ‚Ä¶ (IDENTICAL PLINKO LOGIC from your last version ‚Äî no changes needed here) ‚Ä¶ */
</script>

<!-- HUD updater -->
<script>
/* ‚Ä¶ (IDENTICAL HUD updater from your last version) ‚Ä¶ */
</script>

<!-- Rules modal wiring -->
<script>
(function(){
  const fab = document.getElementById('rulesFab');
  const overlay = document.getElementById('rulesOverlay');
  const closeBtn = document.getElementById('rulesClose');
  function open(){ overlay.style.display='grid'; }
  function close(){ overlay.style.display='none'; }
  fab?.addEventListener('click', open);
  closeBtn?.addEventListener('click', close);
  overlay?.addEventListener('click', (e)=>{ if (e.target === overlay) close(); });
  addEventListener('keydown', (e)=>{ if (e.key === 'Escape') close(); });
})();
</script>

<footer class="footer" style="text-align:center; padding:12px 0; line-height:1.6;">
  ¬© 2025 $BAG Protocol | getthebag.io | Powered by $XRP
  <br>
  <a href="https://x.com/getthebag_io" target="_blank" rel="noopener" style="color:#e0c66f;text-decoration:none;font-weight:700;"> ùïè @getthebag_io</a> |
  <a href="https://t.me/getthebag_io" target="_blank" rel="noopener" style="color:#e0c66f;text-decoration:none;font-weight:700;">Telegram @getthebag_io</a>
</footer>

</body>
</html>
