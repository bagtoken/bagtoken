<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<meta name="format-detection" content="telephone=no" />
<title>$BAG Casino â€” Plinko</title>

<style>
  :root{
    /* Site theme */
    --bg:#020703; --panel:#0b1b13; --panel2:#0d2217; --line:#173524;
    --fg:#f5f7f4; --muted:#aeb7af; --gold:#ffd700; --shadow:rgba(0,0,0,.35);

    /* 1024Ã—1536 portrait frame (2:3) */
    --frame-ar: 2 / 3;
    --frame-max-h: 92vh;
    --frame-max-w: 1120px;

    /* Inner play-area inset and rounding */
    --box-inset: 3.5%;
    --box-radius: 14px;
  }

  *{box-sizing:border-box}
  html,body{margin:0;background:var(--bg);color:var(--fg);
    font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}

  /* Back bar to hub */
  .backbar{position:sticky;top:0;z-index:999;background:linear-gradient(180deg,#0f1f17,#0e271c);
    border-bottom:1px solid #1b4a2f;box-shadow:0 4px 18px var(--shadow)}
  .backlink{display:inline-block;margin:10px 12px;padding:10px 14px;border-radius:12px;
    color:#08130d;text-decoration:none;font-weight:900;letter-spacing:.2px;
    background:linear-gradient(180deg,#ffe175 0%, #f5c94c 100%);
    box-shadow:0 3px 0 #b08a19;transition:transform .06s ease,box-shadow .2s ease,filter .2s ease}
  .backlink:hover{filter:brightness(1.05)}
  .backlink:active{transform:translateY(1px);box-shadow:0 2px 0 #9a7315}

  .wrap{max-width:1200px;margin:0 auto;padding:18px 12px 28px}
  .top{text-align:center;margin:4px 0 12px}
  .top h1{margin:6px 0 2px;font-size:clamp(20px,3.8vw,28px)}
  .tag{color:var(--muted)}

  /* === 1024Ã—1536 SKIN FRAME ===================================== */
  .frame{
    position:relative;
    aspect-ratio:var(--frame-ar);
    margin:14px auto;
    width:min(100%, var(--frame-max-w));
    max-height:var(--frame-max-h);
    background:linear-gradient(180deg,var(--panel),var(--panel2));
    border:1px solid var(--line);
    border-radius:16px;
    box-shadow:0 10px 30px var(--shadow);
    overflow:hidden;
  }

  /* Skin art underlay */
  .skin{position:absolute;inset:0;display:block;line-height:0}
  .skin img{width:100%;height:100%;object-fit:cover;display:block}

  /* Overlay play area; your game mounts INSIDE this without edits */
  .gamebox{
    position:absolute;inset:var(--box-inset);
    border-radius:var(--box-radius);
    background:rgba(10,15,12,.65);
    border:1px solid rgba(39,86,61,.75);
    box-shadow:inset 0 0 40px rgba(0,0,0,.35), 0 12px 28px rgba(0,0,0,.35);
    overflow:hidden;
    display:grid;place-items:center;
  }

  /* Whatever your game root is, it will scale to fill .gamebox */
  #plinko-mount > *{
    width:100% !important;
    height:100% !important;
    max-width:none !important;
    max-height:none !important;
  }

  /* Tiny HUD for demo / status */
  .hud{
    position:absolute;left:50%;top:10px;transform:translateX(-50%);
    background:rgba(0,0,0,.35);backdrop-filter:blur(6px) saturate(120%);
    border:1px solid #2b6a48;border-radius:10px;padding:6px 10px;font-weight:800;
    color:#d8efe4;font-size:13px;letter-spacing:.2px
  }

  .tip{text-align:center;color:#aab3ab;font-size:13px;margin:10px 0 0}

  /* Mobile: give a touch more play space */
  @media (max-width:720px){
    :root{ --box-inset: 2.5%; }
  }
</style>
</head>
<body>

<nav class="backbar" role="navigation" aria-label="Back">
  <a class="backlink" href="/casino/" aria-label="Back to Casino">â¬… Back to Casino</a>
</nav>

<div class="wrap">
  <div class="top">
    <h1>ðŸ’¥ $BAG Plinko</h1>
    <div class="tag">Skin is portrait 1024Ã—1536. Game overlays the skin. No game logic touched.</div>
  </div>

  <!-- === SKIN + GAMEBOX ========================================= -->
  <section class="frame" aria-label="Plinko Game Frame">
    <!-- Skin underlay -->
    <picture class="skin" aria-hidden="true">
      <source type="image/webp"
              srcset="/casino/assets/img/bag-plinko-skin-960.webp 960w, /casino/assets/img/bag-plinko-skin-1024.webp 1024w"
              sizes="(min-width:1024px) 700px, 100vw">
      <img
        src="/casino/assets/img/bag-plinko-skin-1024.png"
        srcset="/casino/assets/img/bag-plinko-skin-960.png 960w, /casino/assets/img/bag-plinko-skin-1024.png 1024w"
        sizes="(min-width:1024px) 700px, 100vw"
        width="1024" height="1536" alt="">
    </picture>

    <!-- Overlay play area (your app goes here) -->
    <div class="gamebox">
      <div class="hud" id="hud">Mounting your Plinkoâ€¦</div>
      <div id="plinko-mount" aria-live="polite"></div>
    </div>
  </section>

  <p class="tip">Adjust <code>--box-inset</code> for tighter or looser margins inside the skin.</p>
</div>

<script>
/*
  Zero-change mounting:
  - If your page already renders a Plinko root (e.g., #plinko, #game, .plinko-root, or a canvas),
    we MOVE it into #plinko-mount so it sits over the skin.
  - If nothing is found, a tiny demo runs so you can confirm the frame & scaling.
*/
(function(){
  const hud = document.getElementById('hud');
  const mount = document.getElementById('plinko-mount');

  function findGameRoot(){
    // Add/adjust selectors here if your root differs
    const sel = ['#plinko', '#game', '.plinko-root', 'canvas'];
    for (const s of sel){
      const el = document.querySelector(s);
      if (el) return el;
    }
    return null;
  }

  function moveIntoMount(el){
    if (!el) return false;
    // If it's the <body> only child case, clone; otherwise just move
    try {
      mount.appendChild(el);
    } catch (_){
      const clone = el.cloneNode(true);
      mount.appendChild(clone);
    }
    return true;
  }

  function startTinyDemo(){
    hud.textContent = 'Demo running â€” real Plinko not detected on page';
    const canvas = document.createElement('canvas');
    canvas.style.background = '#0a1511';
    mount.appendChild(canvas);
    const ctx = canvas.getContext('2d');

    function fit(){
      const r = mount.getBoundingClientRect();
      const d = Math.max(1, window.devicePixelRatio || 1);
      const w = Math.floor(r.width * d), h = Math.floor(r.height * d);
      if (canvas.width !== w || canvas.height !== h){
        canvas.width=w; canvas.height=h; canvas.style.width='100%'; canvas.style.height='100%';
      }
    }

    // simple 7-lane demo
    const balls = [];
    function drop(){
      balls.push({x: Math.random(), y: -0.05, vy: 0, r: 0.012});
    }

    function step(dt){
      for (const b of balls){
        b.vy += 0.85*dt;
        b.y += b.vy*dt;
        // crude peg bounce fields
        b.x += (Math.sin((b.y*18)|0) * 0.003);
      }
      // remove off screen
      for (let i=balls.length-1;i>=0;i--) if (balls[i].y>1.08) balls.splice(i,1);
    }

    function draw(){
      fit();
      const W=canvas.width, H=canvas.height;
      ctx.clearRect(0,0,W,H);

      // slots
      const lanes=7;
      ctx.strokeStyle='#2a6b4a'; ctx.lineWidth=Math.max(2, W*0.002);
      for(let i=0;i<=lanes;i++){
        const x = (0.08 + 0.84*(i/lanes)) * W;
        ctx.beginPath(); ctx.moveTo(x, H*0.76); ctx.lineTo(x, H*0.96); ctx.stroke();
      }

      // title
      ctx.fillStyle='#d2b55a'; ctx.font = Math.floor(H*0.04)+'px system-ui,Segoe UI,Roboto,sans-serif';
      ctx.textAlign='center';
      ctx.fillText('$BAG PLINKO â€” DEMO', W/2, H*0.08);

      // balls
      for (const b of balls){
        const x=b.x*W, y=b.y*H, r=b.r*Math.min(W,H);
        ctx.beginPath(); ctx.arc(x,y,r,0,Math.PI*2);
        ctx.fillStyle='#2fbf6b'; ctx.fill();
        ctx.strokeStyle='#0c4a2e'; ctx.lineWidth=Math.max(2,r*0.18); ctx.stroke();
      }
    }

    let last=performance.now(), acc=0;
    function loop(t){
      const dt=Math.min(0.033,(t-last)/1000); last=t; acc+=dt;
      if (acc>0.35){ drop(); acc=0; }
      step(dt); draw();
      requestAnimationFrame(loop);
    }
    window.addEventListener('resize', draw);
    requestAnimationFrame(loop);
  }

  function init(){
    const root = findGameRoot();
    if (root && moveIntoMount(root)){
      hud.textContent = 'Plinko mounted';
    } else {
      startTinyDemo();
    }
  }

  if (document.readyState === 'complete' || document.readyState === 'interactive') init();
  else document.addEventListener('DOMContentLoaded', init, {once:true});
})();
</script>

<noscript>
  <style>.noscript{max-width:720px;margin:12px auto;padding:12px;border:1px solid #2b6a48;border-radius:12px;background:#0d2217;color:#eaf3ee}</style>
  <div class="noscript">Enable JavaScript to play $BAG Plinko.</div>
</noscript>

</body>
</html>
