<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<!-- Prevent mobile zoom & keep text sizes stable -->
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<meta name="format-detection" content="telephone=no">
<title>BAG Slots</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0f0b07; --wood:#2a1a10; --gold:#d7a646; --gold-2:#f2c76b;
    --muted:#7a6a58; --win:#22c55e; --lose:#ef4444;
  }
  *{box-sizing:border-box}
  html,body{height:100%; -webkit-text-size-adjust:100%}
  body{
    margin:0;
    background:radial-gradient(1400px 800px at 50% 0%, #1d120a 0%, var(--bg) 60%) fixed;
    color:#f6eddc;
    font-family:Inter,system-ui,Arial,sans-serif;
    display:flex;flex-direction:column;align-items:center
  }
  button,[role="button"],a.btn{touch-action:manipulation;font-size:16px}

  /* Header + Banner (unchanged) */
  header{width:min(1120px,94vw);margin:14px 0 10px;text-align:center}
  .banner{width:100%;border-radius:14px;display:block;box-shadow:0 16px 60px rgba(0,0,0,.45)}
  .title{font-weight:800;letter-spacing:.06em;font-size:clamp(22px,4.6vw,40px);
         text-shadow:0 0 14px rgba(242,199,107,.45), 0 0 2px #000;
         color:transparent;background:linear-gradient(#f8d78a,#e9b751);
         -webkit-background-clip:text;background-clip:text;margin:10px 0 0}

  /* Back to Casino — EXACT Dice button style, centered */
  .cta-row{width:min(1120px,94vw);display:flex;justify-content:center;margin:10px 0 8px}
  .btn{
    background:linear-gradient(180deg,#f2c76b,#d7a646);color:#2a1a10;
    font-weight:800;border:none;border-radius:12px;padding:12px 22px;
    box-shadow:0 6px 0 #7f5a20, 0 10px 32px rgba(242,199,107,.25);
    cursor:pointer;transition:transform .05s;text-decoration:none;display:inline-flex;align-items:center;gap:8px
  }
  .btn:active{transform:translateY(1px)}
  .btn[disabled]{opacity:.5;cursor:not-allowed;box-shadow:none}

  /* Live pricing bar */
  .ticker{
    width:min(1120px,94vw);display:grid;grid-template-columns:repeat(4,1fr);
    gap:12px;margin:6px 0 16px
  }
  .tick{background:#16100b;border:1px solid #3a2a1a;border-radius:12px;padding:10px 12px;text-align:center}
  .tick small{display:block;opacity:.75}
  .tick strong{display:block;font-size:18px;margin-top:4px}
  .demoTag{font-size:11px;opacity:.7}

  /* Stage — hard-centered */
  .stage{width:min(980px,94vw);margin:6px auto 24px auto;display:flex;justify-content:center;align-items:flex-end}
  .cabinet{
    width:min(800px,100%); margin:0 auto;   /* keep cabinet hard-centered */
    background:linear-gradient(180deg,#3c2818,#1c120b);
    border:8px solid #4b311a;border-radius:18px;padding:22px;position:relative;
    box-shadow:0 26px 120px rgba(0,0,0,.65), inset 0 0 0 1px rgba(255,255,255,.05)
  }
  .cabinet.win-glow{box-shadow:0 0 0 3px rgba(242,199,107,.5), 0 60px 160px rgba(242,199,107,.45), inset 0 0 0 1px rgba(255,255,255,.05)}
  .top-arch{ text-align:center;padding:12px 0 8px;margin-bottom:12px;border-radius:12px;
             background:linear-gradient(180deg,#4b331d,#2d1c10); color:var(--gold-2);font-weight:800;letter-spacing:.08em }

  /* Reels (same long spin) */
  .reels{ display:grid;grid-template-columns:repeat(3,1fr);gap:16px;
          background:#130d08;border:3px solid #44301d;border-radius:12px;padding:16px;overflow:hidden;position:relative }
  .reel{height:280px;border-radius:12px;background:linear-gradient(180deg,#24160e,#0d0805);position:relative;overflow:hidden;border:1px solid #3a2818}
  .strip{position:absolute;left:0;right:0;top:0;transition:transform 2600ms cubic-bezier(.07,.95,.05,1)}
  .cell{height:93px;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:36px;color:#f7e9c7;text-shadow:0 2px 0 #000}
  .sym-seven{color:#ff5236}.sym-diamond{color:#9be8ff}.sym-bagcoin{color:#f2c76b}.sym-duffle{color:#b8e5c8}.sym-bar{color:#e6d1b0}.sym-cherry{color:#ff9bb0}

  .win-overlay{position:absolute;inset:0;display:none;align-items:center;justify-content:center;background:radial-gradient(800px 400px at 50% 50%, rgba(242,199,107,.18), transparent 60%);pointer-events:none}
  .win-overlay.show{display:flex}
  .badge{font-weight:900;font-size:44px;letter-spacing:.08em;padding:12px 18px;border-radius:14px;color:#1c130a;background:linear-gradient(180deg,#ffe6a8,#eac070);box-shadow:0 8px 40px rgba(242,199,107,.35)}

  /* Control panel — responsive, no overflow */
  .panel{
    margin-top:16px;
    display:grid;
    grid-template-columns: repeat(5, minmax(180px, 1fr));  /* SAFE min width */
    gap:14px; align-items:center
  }
  @media (max-width: 980px){ .panel{ grid-template-columns: repeat(3, minmax(180px, 1fr)); } }
  @media (max-width: 620px){ .panel{ grid-template-columns: 1fr; } }

  .display{ background:#16100b;border:1px solid #3a2a1a;border-radius:12px;padding:12px;text-align:center; overflow-wrap:anywhere }
  .usd{display:block;opacity:.78;font-size:12px;margin-top:4px}

  /* Drawer (unchanged) */
  .drawer-wrap{position:relative;justify-self:end}
  .drawer{ position:absolute; right:0; top:100%; margin-top:8px; background:#15100b; border:1px solid #3a2a1a; border-radius:12px;
           box-shadow:0 16px 70px rgba(0,0,0,.5); padding:12px; min-width:360px; display:none; z-index:10 }
  .drawer.open{display:block}
  .drawer h4{margin:4px 0 8px 0}
  .drawer table{width:100%;border-collapse:collapse;font-size:14px}
  .drawer th,.drawer td{padding:6px 4px;border-bottom:1px solid #2b2118;text-align:left}
  .drawer th{color:#f2c76b}
  .note{font-size:12px;opacity:.85;margin-top:6px}

  /* Readouts */
  .readouts{width:min(980px,94vw);display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin:8px 0 20px}
  .card{background:#16100b;border:1px solid #3a2a1a;border-radius:12px;padding:12px}
  .card h5{margin:0 0 6px 0;color:#f2c76b}

  footer{opacity:.6;font-size:12px;margin:12px 0 24px}
</style>
</head>
<body>
  <header>
    <img class="banner" src="/assets/bag-slots.png" alt="BAG Slots">
    <div class="title">BAG CASINO — SLOTS</div>
  </header>

  <!-- Back to Casino (Dice-style button, centered) -->
  <div class="cta-row">
    <a class="btn" href="/casino/index.html">Back to Casino</a>
  </div>

  <!-- Pricing (unchanged content) -->
  <section class="ticker" aria-label="Live Pricing">
    <div class="tick"><small>XRP / USD</small><strong id="xrpUsd">—</strong></div>
    <div class="tick"><small>BAG / XRP</small><strong id="bagXrp">—</strong></div>
    <div class="tick"><small>BAG / USD</small><strong id="bagUsd">—</strong></div>
    <div class="tick"><small>Updated</small><strong id="pxTime">—</strong><span id="pxDemo" class="demoTag"></span></div>
  </section>

  <main class="stage">
    <section class="cabinet" aria-label="BAG Slots Machine">
      <div class="top-arch">BAG SLOTS</div>

      <div class="reels" id="reels">
        <div class="reel"><div class="strip" data-col="0"></div></div>
        <div class="reel"><div class="strip" data-col="1"></div></div>
        <div class="reel"><div class="strip" data-col="2"></div></div>
        <div class="win-overlay" id="winOverlay"><div class="badge" id="winBadge">WIN!</div></div>
      </div>

      <!-- PANEL uses the new responsive grid, so Currency / Win won’t fall off -->
      <div class="panel">
        <div class="display">
          <strong>Balance</strong>
          <div id="bal">—</div>
          <span class="usd" id="balUsd">—</span>
        </div>

        <div class="display">
          <strong>Bet</strong>
          <div style="display:flex;gap:8px;justify-content:center;align-items:center">
            <button id="betDown" class="btn" aria-label="Decrease bet">–</button>
            <span id="betVal">10</span>
            <button id="betUp" class="btn" aria-label="Increase bet">+</button>
          </div>
          <span class="usd" id="betUsd">—</span>
        </div>

        <div class="display">
          <strong>Currency</strong>
          <div role="group" aria-label="Currency" style="display:flex;gap:8px;justify-content:center;">
            <button id="curBAG" class="btn" style="padding:8px 12px">BAG</button>
            <button id="curXRP" class="btn" style="padding:8px 12px;opacity:.85">XRP</button>
          </div>
        </div>

        <div class="drawer-wrap">
          <button id="paytableBtn" class="btn" aria-expanded="false" aria-controls="paytable">Payouts</button>
          <div id="paytable" class="drawer" role="dialog" aria-label="Payout Table">
            <h4>Paylines</h4>
            <div class="note">5 lines: 3 horizontals + 2 diagonals. Multiple wins add together.</div>
            <h4 style="margin-top:10px">Payouts (3-in-line)</h4>
            <table>
              <thead><tr><th>Symbol</th><th>× Bet</th></tr></thead>
              <tbody>
                <tr><td>777</td><td>10×</td></tr>
                <tr><td>Diamond</td><td>6×</td></tr>
                <tr><td>BAG coin</td><td>4×</td></tr>
                <tr><td>Duffle</td><td>3×</td></tr>
                <tr><td>Bar</td><td>2×</td></tr>
                <tr><td>Cherry</td><td>1×</td></tr>
              </tbody>
            </table>
            <div class="note">Labels use BAG and XRP (no $ prefix). Payouts are multipliers on your bet.</div>
          </div>
        </div>

        <!-- SPIN BUTTON -->
        <button id="spin" class="btn" style="justify-self:center;min-width:180px">SPIN</button>

        <div class="display">
          <strong>Win</strong>
          <div id="win">0</div>
          <span class="usd" id="winUsd">—</span>
        </div>
      </div>
    </section>
  </main>

  <!-- Readouts (unchanged) -->
  <section class="readouts" aria-label="Results">
    <div class="card"><h5>Last Result</h5><div id="lastResult">—</div></div>
    <div class="card"><h5>Multiplier</h5><div id="lastMult">—</div></div>
    <div class="card"><h5>Profit</h5><div id="lastProfit">—</div></div>
  </section>

  <footer>© BAG Casino</footer>

  <!-- Sounds -->
  <audio id="sSpin" preload="auto" src="/assets/audio/spin.mp3" loop></audio>
  <audio id="sWin"  preload="auto" src="/assets/audio/win.mp3"></audio>
  <audio id="sLose" preload="auto" src="/assets/audio/lose.mp3"></audio>

<script type="module">
  /* JS stays the same as the last working version you have (spin, pricing, sounds)
     — you do not need to change logic for these layout fixes. 
     If you want me to paste the full JS again, say the word and I’ll drop it in. */
</script>
</body>
</html>
