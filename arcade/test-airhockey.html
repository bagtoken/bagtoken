<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>ğŸ’ $BAG Air Hockey â€” Arcade P2E</title>

<link rel="preconnect" href="https://api.coingecko.com" crossorigin>
<script src="https://xaman.app/assets/cdn/xumm.min.js"></script>

<style>
:root{
  --gold:#ffe175;--bg:#020703;--panel:#0b1b13;--panel2:#0d2217;
  --muted:#aeb7af;--fg:#f5f7f4;--green:#2fbf6b;--line:#173524;--shadow:rgba(0,0,0,.35);
}
html,body{margin:0;padding:0;background:var(--bg);color:var(--fg);
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;line-height:1.55;}
img{display:block;max-width:100%;height:auto}
.btn{cursor:pointer;border:0;border-radius:12px;padding:10px 14px;
  font-weight:900;background:linear-gradient(180deg,#ffe175,#f5c94c);
  color:#08130d;box-shadow:0 4px 0 #b08a19;}
.btn:active{transform:translateY(1px);box-shadow:0 3px 0 #9a7315;}
.panel{background:linear-gradient(180deg,var(--panel) 0%,var(--panel2) 100%);
  border:1px solid var(--line);border-radius:16px;box-shadow:0 8px 24px var(--shadow);}
.pad{padding:16px}
.marquee{text-align:center;font-weight:900;letter-spacing:.08em;color:#ffe9a6;
  background:linear-gradient(180deg,#17311f,#0e2419);
  border:1px solid #254a33;border-radius:12px;padding:8px;margin:10px 0;}
.divider{height:1px;background:#123221;margin:10px 0}
</style>
</head>
<body>

<a href="/casino/" class="btn" style="position:fixed;top:18px;left:18px;z-index:1000;">â¬…ï¸ Back to Casino</a>

<section style="text-align:center;padding-top:60px;">
  <picture>
    <source type="image/webp" srcset="/arcade/assets/img/airhockey_table-1024.webp 1024w">
    <img src="/arcade/assets/img/airhockey_table-1024.webp" alt="$BAG Air Hockey" width="1024" height="576" loading="lazy">
  </picture>
  <h2 style="margin:10px 0 4px">ğŸ’ $BAG Air Hockey â€” Arcade P2E</h2>
  <p style="font-size:.9rem;opacity:.85">ğŸ’° All payouts in $BAG. $XRP bets convert automatically at the live rate.</p>
</section>

<section style="padding:0 16px 80px;">
  <div class="panel pad">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
      <div id="sessionStatus" style="font-size:.9rem">Session: <span style="color:#2fbf6b">Practice</span></div>
      <button id="startSessionBtn" class="btn">Start Session</button>
    </div>

    <div class="divider"></div>

    <div class="marquee">$BAG LIVE PRICES</div>
    <div style="text-align:center;font-family:monospace;">
      <span id="liveDot" style="color:#e8a85c">â—</span>
      BAG $<span id="liveBAG">â€”</span> Â· XRP $<span id="liveXRP">â€”</span>
      <div id="liveConv" style="font-size:.85rem;opacity:.85;margin-top:4px">
        1 BAG â‰ˆ â€” XRP Â· 1 XRP â‰ˆ â€” BAG
      </div>
    </div>

    <div class="divider"></div>

    <div id="practiceBalance" style="text-align:center;line-height:1.6">
      <div style="font-weight:800">Practice Balance</div>
      <div>BAG: <span id="balBAG">â€”</span>  XRP: <span id="balXRP">â€”</span></div>
      <div>USD: <span id="balUSD">â€”</span></div>
    </div>
  </div>
</section>

<footer style="text-align:center;padding:14px 0;font-size:.9rem;color:#b9c1b5">
  Â© 2025 $BAG Protocol | getthebag.io | Powered by $XRP
</footer>

<!-- ğŸ”¹ Live price refresh (same core as Dice) -->
<script>
(function(){
  const PRICE_REFRESH_MS=15000;
  const BAG_ISSUER='rNeYbfb9EDV8c7mNfUuooEEYYzMcEuDFbr',BAG_CODE='BAG';
  const P={bagUsd:0,xrpUsd:0};
  const fmt=n=>Number.isFinite(n)?n.toFixed(6):'â€”';
  async function fetchPrices(){
    try{
      const r1=await fetch('https://api.coingecko.com/api/v3/simple/price?ids=ripple&vs_currencies=usd');
      const xrp=(await r1.json())?.ripple?.usd||0;
      const ws=new WebSocket('wss://s1.ripple.com');
      const p2=new Promise(res=>{
        const req={id:1,command:'amm_info',asset:{currency:BAG_CODE,issuer:BAG_ISSUER},asset2:{currency:'XRP'}};
        ws.onopen=()=>ws.send(JSON.stringify(req));
        ws.onmessage=e=>{
          try{const d=JSON.parse(e.data);
            if(d.result?.amm){const a=+d.result.amm.amount.value,b=+d.result.amm.amount2.value;
              if(a>0&&b>0){res(b/a*xrp);}ws.close();}
          }catch{}
        };
        setTimeout(()=>{try{ws.close();}catch{};res(null);},6000);
      });
      const bagUsd=await p2;
      if(xrp>0&&bagUsd>0){P.xrpUsd=xrp;P.bagUsd=bagUsd;update();}
    }catch{}
  }
  function update(){
    document.getElementById('liveBAG').textContent=fmt(P.bagUsd);
    document.getElementById('liveXRP').textContent=fmt(P.xrpUsd);
    const conv=document.getElementById('liveConv');
    if(P.bagUsd&&P.xrpUsd){
      const xrpPerBag=P.bagUsd/P.xrpUsd,bagPerXrp=P.xrpUsd/P.bagUsd;
      conv.textContent=`1 BAG â‰ˆ ${xrpPerBag.toFixed(6)} XRP Â· 1 XRP â‰ˆ ${bagPerXrp.toFixed(6)} BAG`;
    }
    document.dispatchEvent(new Event('bag:pricesUpdated'));
  }
  fetchPrices(); setInterval(fetchPrices,PRICE_REFRESH_MS);
})();
</script>

<!-- ğŸ”¹ Practice balance system -->
<script>
(function(){
  const BAL_KEY='bag_demo_balance',USD_START=2000;
  let bagUsd=0;
  function PR(){return window.P||{bagUsd:0,xrpUsd:0};}
  function getBag(){return Number(localStorage.getItem(BAL_KEY)||0);}
  function setBag(v){localStorage.setItem(BAL_KEY,v);}
  function seed(){
    const bag=getBag();if(bag>0)return;
    const p=window.P?.bagUsd||0;if(p>0){setBag(USD_START/p);}
  }
  function render(){
    const bal=getBag(),p=window.P||{bagUsd:0,xrpUsd:0};
    const usd=(p.bagUsd>0)?bal*p.bagUsd:USD_START;
    const xrp=(p.bagUsd>0&&p.xrpUsd>0)?bal*(p.bagUsd/p.xrpUsd):0;
    document.getElementById('balBAG').textContent=bal.toFixed(2);
    document.getElementById('balXRP').textContent=xrp.toFixed(2);
    document.getElementById('balUSD').textContent='$'+usd.toFixed(2);
  }
  document.getElementById('startSessionBtn').addEventListener('click',()=>{seed();render();});
  document.addEventListener('bag:pricesUpdated',render);
})();
</script>

</body>
</html>

