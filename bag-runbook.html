<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>$BAG Deployment Runbook</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root{
      --bg:#050608;
      --panel:#0d1117;
      --panel2:#101822;
      --accent:#15c36f;
      --accent-soft:#22a86a;
      --border:#1e252f;
      --text:#f5f5f5;
      --muted:#a7b0c0;
      --danger:#ff5c5c;
      --gold:#ffd770;
      --code-bg:#050a11;
      --code-border:#242f3d;
      --link:#4dd2ff;
      --max:960px;
    }
    *{box-sizing:border-box;}
    html,body{
      margin:0;
      padding:0;
      background:radial-gradient(circle at top,#111827 0,#050608 52%,#02040a 100%);
      color:var(--text);
      font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,system-ui,sans-serif;
      line-height:1.55;
    }
    body{padding:24px 12px 40px;}
    .wrap{
      max-width:var(--max);
      margin:0 auto;
      background:linear-gradient(145deg,rgba(10,17,25,0.96),rgba(5,8,12,0.98));
      border:1px solid #181f2b;
      border-radius:16px;
      box-shadow:0 18px 50px rgba(0,0,0,.65);
      padding:22px 18px 28px;
    }
    @media (min-width:720px){
      .wrap{padding:28px 32px 36px;}
    }
    h1,h2,h3,h4{
      font-weight:700;
      margin:0 0 10px;
    }
    h1{
      font-size:1.9rem;
      letter-spacing:0.04em;
      text-transform:uppercase;
    }
    h2{
      font-size:1.25rem;
      margin-top:26px;
      padding-top:8px;
      border-top:1px solid #181f2b;
    }
    h3{
      font-size:1.05rem;
      margin-top:18px;
    }
    p{
      margin:4px 0 10px;
      color:var(--muted);
    }
    a{
      color:var(--link);
      text-decoration:none;
    }
    a:hover{text-decoration:underline;}
    .badge{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:3px 10px 4px;
      border-radius:999px;
      font-size:0.78rem;
      text-transform:uppercase;
      letter-spacing:0.12em;
      background:rgba(15,118,110,0.12);
      border:1px solid rgba(45,212,191,0.32);
      color:var(--accent-soft);
      margin-bottom:6px;
    }
    .badge-dot{
      width:7px;
      height:7px;
      border-radius:50%;
      background:#22c55e;
      box-shadow:0 0 10px rgba(34,197,94,.85);
    }
    .lead{
      margin-top:4px;
      font-size:0.92rem;
      color:var(--muted);
    }
    .section{
      margin-top:14px;
      padding:12px 12px 12px;
      border-radius:12px;
      background:radial-gradient(circle at top left,rgba(37,99,235,0.18),transparent 58%),linear-gradient(135deg,rgba(15,23,42,0.96),rgba(3,7,18,0.98));
      border:1px solid rgba(30,41,59,0.9);
    }
    .section-alt{
      background:linear-gradient(145deg,rgba(15,23,42,0.95),rgba(8,13,23,0.98));
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:6px;
      font-size:0.78rem;
      text-transform:uppercase;
      letter-spacing:0.15em;
      padding:3px 11px 4px;
      border-radius:999px;
      background:rgba(17,24,39,0.9);
      border:1px solid rgba(55,65,81,0.9);
      color:var(--muted);
      margin-bottom:6px;
    }
    .pill span{
      display:inline-block;
      width:8px;
      height:8px;
      border-radius:50%;
      background:var(--accent);
      box-shadow:0 0 8px rgba(34,197,94,.9);
    }
    ul,ol{
      margin:6px 0 10px 20px;
      padding:0;
      color:var(--muted);
    }
    li{margin:2px 0 4px;}
    .grid{
      display:grid;
      grid-template-columns:1fr;
      gap:12px;
      margin-top:6px;
    }
    @media (min-width:720px){
      .grid-2{grid-template-columns:1.1fr 1fr;}
    }
    .card{
      padding:10px 11px 11px;
      border-radius:10px;
      background:rgba(15,23,42,0.88);
      border:1px solid rgba(31,41,55,0.95);
    }
    .card h3{
      margin-top:4px;
      font-size:0.98rem;
    }
    .label{
      font-size:0.75rem;
      text-transform:uppercase;
      letter-spacing:0.12em;
      color:#9ca3af;
      margin-bottom:2px;
    }
    .mono{
      font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
      font-size:0.86rem;
    }
    pre{
      margin:8px 0 10px;
      padding:10px 11px;
      border-radius:8px;
      background:var(--code-bg);
      border:1px solid var(--code-border);
      overflow-x:auto;
      font-size:0.8rem;
      line-height:1.5;
    }
    code{font-family:inherit;}
    .danger{
      border-color:rgba(239,68,68,0.6);
      background:radial-gradient(circle at top left,rgba(239,68,68,0.16),rgba(15,23,42,0.96));
    }
    .danger-title{
      color:var(--danger);
      font-weight:600;
    }
    .ok{
      color:var(--accent-soft);
      font-weight:600;
    }
    .strong{color:var(--text);font-weight:600;}
    .mt-small{margin-top:6px;}
    .muted{color:var(--muted);}
    hr{
      border:none;
      border-top:1px solid #1f2933;
      margin:16px 0 14px;
    }
    .footer{
      margin-top:12px;
      font-size:0.75rem;
      color:var(--muted);
      text-align:right;
      opacity:0.85;
    }
  </style>
</head>
<body>
<div class="wrap">
  <div class="badge">
    <span class="badge-dot"></span>
    $BAG RUNBOOK ¬∑ LIVE
  </div>
  <h1>$BAG Deployment Runbook</h1>
  <p class="lead">
    Canonical deployment flow for <span class="strong">getthebag.io</span> on XRPL.  
    This file is the source of truth for infra, deploy, and recovery.
  </p>

  <!-- üî• QUICK TERMINAL MAP ‚Äì READ THIS FIRST -->
  <div class="section danger">
    <h2 class="danger-title">0. Which Box Am I In</h2>
    <p class="muted">
      Two worlds. Do not mix them.
    </p>
    <div class="grid grid-2">
      <div class="card">
        <div class="label">LOCAL DEV ¬∑ WSL (SAFE TO EDIT)</div>
        <p class="mono">
          Prompt looks like:<br>
          <span class="strong">mrcauliman@mrcauliman:~$</span><br><br>
          This is your <span class="strong">WSL box</span> on your PC.<br>
          Here you:<br>
          ‚Ä¢ <span class="strong">edit files</span> (index.html, testindex.html, etc.)<br>
          ‚Ä¢ run <span class="strong">git</span> (status / add / commit / push)<br>
          ‚Ä¢ run <span class="strong">deploy_bag.sh</span> to deploy
        </p>
        <pre><code class="mono">cd ~/bagtoken
git status
git pull --rebase origin main
# edit files
git add &lt;files&gt;
git commit -m "Message"
git push origin main</code></pre>
      </div>
      <div class="card">
        <div class="label">PRODUCTION ¬∑ DROPLET (NO EDITS)</div>
        <p class="mono">
          Prompt looks like:<br>
          <span class="strong">root@64.225.120.72:~#</span><br><br>
          This is the <span class="strong">live server</span>.<br>
          Here you:<br>
          ‚Ä¢ <span class="strong">never edit HTML</span><br>
          ‚Ä¢ only <span class="strong">pull from GitHub</span><br>
          ‚Ä¢ reload nginx after pulls
        </p>
        <pre><code class="mono">ssh root@64.225.120.72

cd /var/www/getthebag.io
git pull origin main
nginx -t
systemctl reload nginx
exit</code></pre>
      </div>
    </div>
    <p class="mt-small muted">
      Rule: <span class="strong">If the prompt starts with ‚Äúmrcauliman@‚Äù you build.</span>  
      <span class="strong">If it starts with ‚Äúroot@64.225.120.72‚Äù you only pull + reload.</span>
    </p>
  </div>

  <div class="section">
    <div class="pill"><span></span> STACK OVERVIEW</div>
    <div class="grid grid-2">
      <div class="card">
        <div class="label">Local Dev (WSL)</div>
        <p class="mono">
          Repo path: <span class="strong">~/bagtoken</span><br>
          Branch: <span class="strong">main</span><br>
          Remote: <span class="strong">origin ‚Üí github.com:bagtoken/bagtoken.git</span>
        </p>
      </div>
      <div class="card">
        <div class="label">Production Droplet</div>
        <p class="mono">
          Host: <span class="strong">root@64.225.120.72</span><br>
          Docroot: <span class="strong">/var/www/getthebag.io</span><br>
          Server: <span class="strong">nginx</span>
        </p>
      </div>
    </div>
  </div>

  <div class="section section-alt">
    <h2>1. Git Workflow ¬∑ Single Source of Truth</h2>
    <p>
      All production changes flow <span class="strong">WSL ‚Üí GitHub ‚Üí /var/www/getthebag.io</span>.  
      No manual edits on the server. If it is not in Git, it is not real.
    </p>

    <h3>1.1 Local repo (WSL)</h3>
    <pre><code class="mono">cd ~/bagtoken

# Always know your state
git status

# Sync with remote before you touch anything
git pull --rebase origin main</code></pre>

    <h3>1.2 Remote origin</h3>
    <p class="mono">
      Remote: <span class="strong">origin</span><br>
      URL: <span class="strong">git@github.com:bagtoken/bagtoken.git</span> (or HTTPS equivalent)
    </p>
  </div>

  <div class="section">
    <h2>2. Deploy Script ¬∑ Automated Path</h2>
    <p>
      Preferred deploy method is the <span class="strong">deploy_bag.sh</span> script on WSL.  
      It pulls, pushes, connects to the droplet, pulls there, tests nginx, and reloads.
    </p>

    <h3>2.1 Script location</h3>
    <p class="mono">
      Path: <span class="strong">~/deploy_bag.sh</span> (on WSL)
    </p>

    <h3>2.2 Script contents</h3>
    <pre><code class="mono">#!/usr/bin/env bash
set -e

echo "[BAG] Syncing local repo..."
cd ~/bagtoken
git pull --rebase origin main

echo "[BAG] Pushing to GitHub..."
git push origin main

echo "[BAG] Deploying to production droplet..."
ssh root@64.225.120.72 &lt;&lt; 'EOF'
  set -e
  cd /var/www/getthebag.io
  echo "[BAG] Pulling latest from origin/main..."
  git pull origin main

  echo "[BAG] Testing nginx config..."
  nginx -t

  echo "[BAG] Reloading nginx..."
  systemctl reload nginx

  echo "[BAG] Deploy complete on droplet."
EOF

echo "[BAG] Deployment finished successfully."</code></pre>

    <h3>2.3 Make it executable</h3>
    <pre><code class="mono">cd ~
nano deploy_bag.sh   # paste script above
chmod +x ~/deploy_bag.sh</code></pre>

    <h3>2.4 Run a deploy</h3>
    <pre><code class="mono">~/deploy_bag.sh</code></pre>
    <p class="muted">
      This is the only command you need for a normal BAG deploy when the script is in place.
    </p>
  </div>

    <h3>2.5 SSH muscle memory (WSL vs droplet)</h3>
    <p>
      If you see commands like <span class="mono">mrcauliman@mrcauliman:~$ ssh root@64.225.120.72</span> showing up in the shell,
      it means the prompt text itself was pasted into the terminal. That will always throw <span class="mono">command not found</span>.
    </p>
    <p>Do it exactly like this.</p>

    <h4>Step 1: From WSL (your normal prompt)</h4>
    <p>You should see:</p>
    <pre><code class="mono">mrcauliman@mrcauliman:~$</code></pre>
    <p>At that prompt, type <span class="strong">only</span> this and hit Enter:</p>
    <pre><code class="mono">ssh root@64.225.120.72</code></pre>
    <p>
      Nothing else on that line. No extra <span class="mono">mrcauliman@...</span> in front.
      After you connect, the prompt will change to:
    </p>
    <pre><code class="mono">root@mrcauliman:~#</code></pre>

    <h4>Step 2: On the server</h4>
    <p>Once you see the <span class="mono">root@mrcauliman:~#</span> prompt, run these one by one:</p>
    <pre><code class="mono">cd /var/www/getthebag.io
git fetch origin
git reset --hard origin/main
sudo systemctl reload nginx
exit</code></pre>
    <p>
      After <span class="mono">exit</span> you will be back at:
    </p>
    <pre><code class="mono">mrcauliman@mrcauliman:~$</code></pre>
    <p>
      Then do a hard refresh in the browser (Ctrl+F5) and you will see the latest changes from GitHub.
    </p>

  <div class="section section-alt">
    <h2>3. Manual Deploy ¬∑ If Script Is Not Used</h2>
    <p>
      If needed, deploys can be done step-by-step. Same pipeline, just manual.
    </p>

    <h3>3.1 WSL side</h3>
    <pre><code class="mono">cd ~/bagtoken

# Update code, test locally if needed
git pull --rebase origin main

# After editing files:
git status
git add &lt;files&gt;
git commit -m "Describe BAG change"
git push origin main</code></pre>

    <h3>3.2 Server side</h3>
    <pre><code class="mono">ssh root@64.225.120.72

cd /var/www/getthebag.io
git pull origin main

nginx -t
systemctl reload nginx

exit</code></pre>
  </div>

  <div class="section">
    <h2>4. BAG Index / Testindex Flow</h2>
    <p>
      Changes to the front page follow a <span class="strong">test ‚Üí promote</span> pattern.
    </p>

    <h3>4.1 Edit testindex.html first</h3>
    <pre><code class="mono">cd ~/bagtoken

# Edit the test file first
nano testindex.html

git status
git add testindex.html
git commit -m "Update BAG testindex layout"
git push origin main

# Deploy to server (script or manual)
~/deploy_bag.sh
# or:
# ssh root@64.225.120.72 ...</code></pre>

    <p class="muted">
      Validate changes at <span class="mono">https://getthebag.io/testindex.html</span> before touching the live index.
    </p>

    <h3>4.2 Promote to live index.html</h3>
    <pre><code class="mono">cd ~/bagtoken

# Always sync first
git pull --rebase origin main

# Promote testindex to index
cp testindex.html index.html

git status
git add index.html testindex.html
git commit -m "Promote BAG testindex layout to live index"
git push origin main

# Deploy
~/deploy_bag.sh</code></pre>

    <p class="muted">
      After deploy, hard refresh <span class="mono">https://getthebag.io/</span> to see the live changes.
    </p>
  </div>

  <div class="section section-alt">
    <h2>5. Server Docroot ¬∑ Sanity Check</h2>
    <p>
      The live docroot is <span class="strong">/var/www/getthebag.io</span>.  
      Use the <span class="mono">whoami.txt</span> trick if there is any doubt.
    </p>

    <h3>5.1 On the server</h3>
    <pre><code class="mono">ssh root@64.225.120.72

echo "FROM getthebag.io" &gt; /var/www/getthebag.io/whoami.txt</code></pre>

    <h3>5.2 In the browser</h3>
    <pre><code class="mono">https://getthebag.io/whoami.txt</code></pre>

    <p class="ok">
      If you see <span class="mono">FROM getthebag.io</span> the docroot is correct.
    </p>
  </div>

  <div class="section danger">
    <h2>6. Emergency Fix ¬∑ Root Page Not Updating</h2>
    <p class="danger-title">
      Symptom: <span class="muted">/testindex.html updates, but / still shows old layout.</span>
    </p>

    <h3>6.1 Hard reset server repo to origin/main</h3>
    <pre><code class="mono">ssh root@64.225.120.72

cd /var/www/getthebag.io
git fetch origin
git reset --hard origin/main

nginx -t
systemctl reload nginx

exit</code></pre>

    <p class="muted">
      This forces the server to match GitHub exactly. Any local edits on the droplet are discarded.
    </p>

    <h3>6.2 Cache issues</h3>
    <ul>
      <li>Use hard refresh on root: <span class="mono">Ctrl+F5</span> or <span class="mono">Cmd+Shift+R</span>.</li>
      <li>Hit <span class="mono">https://getthebag.io/?v=bagX</span> to bust browser caches.</li>
      <li>If using Cloudflare, set a Cache Rule or temporarily pause proxy so HTML is not held.</li>
    </ul>
  </div>

  <div class="section section-alt">
    <h2>7. XRPL Token Configuration ¬∑ $BAG</h2>
    <p>
      Canonical on-ledger configuration for the $BAG token.
    </p>

    <h3>7.1 Supply and precision</h3>
    <ul>
      <li><span class="strong">Total Supply:</span> 1,000,000,000,000 BAG (1T)</li>
      <li><span class="strong">Decimals:</span> 6</li>
    </ul>

    <h3>7.2 Wallets (XRPL ¬∑ Mainnet)</h3>
    <pre><code class="mono">Issuer:   rNeYbfb9EDV8c7mNfUuooEEYYzMcEuDFbr
Treasury: raoC1r3rTXzG5qppic6VYCqqY87fFcUJch
Reserve:  rJZQH85kH4mMiASm7BxdmjorBonvLeDfrR
Liquidity:rQBXxZ7PwTHF3oFDQ8qhZtizvv2kiMcw17</code></pre>

    <h3>7.3 Internal distribution</h3>
    <ul>
      <li><span class="strong">700B</span> ‚Äì primary distribution / ecosystem.</li>
      <li><span class="strong">200B</span> ‚Äì reserve / future expansions.</li>
      <li><span class="strong">100B</span> ‚Äì liquidity / AMM / market support.</li>
    </ul>
  </div>

  <div class="section">
    <h2>8. Quick Commands ¬∑ Reference Strip</h2>
    <h3>8.1 Standard deploy (script)</h3>
    <pre><code class="mono">~/deploy_bag.sh</code></pre>

    <h3>8.2 Standard deploy (manual)</h3>
    <pre><code class="mono"># WSL
cd ~/bagtoken
git pull --rebase origin main
git add &lt;files&gt;
git commit -m "..."
git push origin main

# Server
ssh root@64.225.120.72
cd /var/www/getthebag.io
git pull origin main
nginx -t
systemctl reload nginx
exit</code></pre>

    <h3>8.3 Diff check for index vs testindex</h3>
    <pre><code class="mono">cd ~/bagtoken
diff index.html testindex.html</code></pre>
  </div>

  <hr>

  <div class="footer">
    $BAG Infra ¬∑ If it is not in this runbook, it is not in production.
  </div>
</div>
</body>
</html>
