<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>BAG — getthebag.io Runbook</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:Arial,system-ui,sans-serif;
    background:#020617;
    color:#e5e7eb;
  }
  .wrapper{
    max-width:720px;
    margin:32px auto;
    padding:20px 18px 28px;
    background:#020617;
  }
  h1{
    text-align:center;
    margin:0 0 18px;
    font-size:1.4rem;
    text-transform:uppercase;
    letter-spacing:.08em;
    color:#facc15;
  }
  .subtitle{
    text-align:center;
    font-size:.9rem;
    color:#9ca3af;
    margin-bottom:20px;
  }
  .tagline{
    font-size:.9rem;
    color:#9ca3af;
    margin-bottom:16px;
    text-align:center;
  }
  .pill{
    display:inline-block;
    padding:2px 8px;
    border-radius:999px;
    font-size:.75rem;
    background:#111827;
    color:#9ca3af;
    margin:0 4px 4px 0;
  }
  .section-label{
    font-size:.9rem;
    text-transform:uppercase;
    letter-spacing:.16em;
    color:#facc15;
    margin-top:22px;
    margin-bottom:6px;
    padding:6px 10px;
    border-left:4px solid #facc15;
    background:linear-gradient(90deg,rgba(250,204,21,.12),rgba(15,23,42,0));
  }
  .code-wrap{
    position:relative;
    margin:4px 0 12px;
  }
  .code-box{
    background:#020617;
    border:1px solid #111827;
    border-radius:8px;
    padding:10px 12px;
    font-family:Menlo,Consolas,monospace;
    font-size:.85rem;
    overflow-x:auto;
    white-space:pre;
  }
  .copy-btn{
    position:absolute;
    top:6px;
    right:8px;
    padding:2px 8px;
    font-size:.7rem;
    border-radius:999px;
    border:1px solid #374151;
    background:#020617;
    color:#9ca3af;
    cursor:pointer;
  }
  .copy-btn:hover{
    background:#111827;
  }
  p{margin:4px 0 8px;line-height:1.6;}
  ul{margin:0 0 10px 20px;padding:0;}
  li{margin-bottom:3px;}
  ol{margin:0 0 10px 20px;padding:0;}
  hr{
    border:0;
    border-top:1px solid #111827;
    margin:18px 0;
  }
  table{
    border-collapse:collapse;
    width:100%;
    margin:4px 0 10px;
    font-size:.85rem;
  }
  th,td{
    border:1px solid #111827;
    padding:6px 8px;
    text-align:left;
  }
  th{
    background:#020617;
    color:#e5e7eb;
  }
</style>
</head>
<body>

<div class="wrapper">
  <h1>BAG Runbook</h1>
  <div class="subtitle">getthebag.io — Site, XRPL wallets, tooling</div>

  <div class="tagline">
    <span class="pill">Local Repo</span> ~/bagtoken
    <span class="pill">GitHub</span> bagtoken/bagtoken
    <span class="pill">Droplet</span> root@64.225.120.72
    <span class="pill">Web Root</span> /var/www/getthebag.io
  </div>

  <!-- ENVIRONMENTS -->
  <div class="section-label">Environments — local vs live</div>
  <p><strong>Local (WSL)</strong></p>
  <ul>
    <li>Repo: <code>~/bagtoken</code> (cloned from GitHub: <code>bagtoken/bagtoken</code>).</li>
    <li>Use for: editing, committing, pushing, running helper scripts.</li>
  </ul>

  <p><strong>Verify GitHub remote on WSL</strong></p>
  <div class="code-wrap">
    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
    <div class="code-box">wsl
cd ~/bagtoken
git remote -v
# origin  git@github.com:bagtoken/bagtoken.git (fetch)
# origin  git@github.com:bagtoken/bagtoken.git (push)</div>
  </div>

  <p><strong>Live droplet (production)</strong></p>
  <ul>
    <li>Host: <code>64.225.120.72</code> (SSH: <code>ssh root@64.225.120.72</code>)</li>
    <li>Web root: <code>/var/www/getthebag.io</code></li>
    <li><code>/var/www/getthebag.io</code> is a <strong>Git clone</strong> of <code>bagtoken/bagtoken</code> used only for <code>git pull</code> and serving files. You do <strong>not</strong> edit or commit on the server.</li>
  </ul>

  <hr>

  <!-- WSL: enter repo -->
  <div class="section-label">Enter BAG repo on WSL</div>
  <div class="code-wrap">
    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
    <div class="code-box">wsl
cd ~/bagtoken
pwd   # /home/mrcauliman/bagtoken</div>
  </div>

  <hr>

  <!-- Deploy script from WSL -->
  <div class="section-label">One-command BAG deploy script (WSL)</div>
  <p>Location: <code>~/deploy_bag.sh</code> on WSL. This syncs WSL → GitHub → droplet (Git pull on server).</p>
  <div class="code-wrap">
    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
    <div class="code-box">cd ~
nano deploy_bag.sh</div>
  </div>

  <p>Script content:</p>
  <div class="code-wrap">
    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
    <div class="code-box">#!/usr/bin/env bash
set -e

REPO_DIR="$HOME/bagtoken"
REMOTE_USER="root"
REMOTE_HOST="64.225.120.72"
SSH_KEY="$HOME/.ssh/id_ed25519"
REMOTE_PATH="/var/www/getthebag.io"
BRANCH="main"

echo "==&gt; Changing to repo: $REPO_DIR"
cd "$REPO_DIR"

echo "==&gt; Checking working tree"
git status

echo "==&gt; Rebased pull from GitHub"
git pull --rebase origin "$BRANCH"

echo "==&gt; Pushing local '$BRANCH' to GitHub"
git push origin "$BRANCH"

echo "==&gt; Deploying from GitHub to $REMOTE_USER@$REMOTE_HOST:$REMOTE_PATH"
ssh -i "$SSH_KEY" "$REMOTE_USER@$REMOTE_HOST" "cd '$REMOTE_PATH' &amp;&amp; git pull origin '$BRANCH' &amp;&amp; nginx -t &amp;&amp; systemctl reload nginx"

echo "==&gt; BAG deploy complete via Git."</div>
  </div>

  <div class="section-label">Make deploy script executable (one time)</div>
  <div class="code-wrap">
    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
    <div class="code-box">chmod +x ~/deploy_bag.sh</div>
  </div>

  <div class="section-label">Standard BAG deploy flow</div>
  <p><strong>Normal flow when you have new changes:</strong></p>
  <ol>
    <li>On WSL:
      <div class="code-wrap">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <div class="code-box">wsl
cd ~/bagtoken
git pull --rebase origin main
# edit files (index.html, etc.)
git status
git add &lt;files&gt;
git commit -m "Message"
git push origin main</div>
      </div>
    </li>
    <li>Deploy (WSL one-liner):
      <div class="code-wrap">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <div class="code-box">~/deploy_bag.sh</div>
      </div>
    </li>
  </ol>

  <p><strong>What the pipeline does:</strong></p>
  <ul>
    <li>Local: <code>git pull --rebase origin main</code></li>
    <li>Local: commit + <code>git push origin main</code></li>
    <li>Server: <code>cd /var/www/getthebag.io &amp;&amp; git pull origin main &amp;&amp; nginx -t &amp;&amp; systemctl reload nginx</code></li>
  </ul>

  <hr>

  <!-- Manual deploy (WSL) -->
  <div class="section-label">Manual WSL → droplet deploy (fallback, no script)</div>
  <p>If you ever want to run it manually without <code>~/deploy_bag.sh</code>:</p>
  <div class="code-wrap">
    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
    <div class="code-box">wsl
cd ~/bagtoken
git pull --rebase origin main
git status
# commit any pending changes here if needed
git push origin main

ssh -i ~/.ssh/id_ed25519 root@64.225.120.72

cd /var/www/getthebag.io
git pull origin main
nginx -t &amp;&amp; systemctl reload nginx

exit</div>
  </div>

  <hr>

  <!-- Direct server-side update -->
  <div class="section-label">Direct server-side update from GitHub (emergency)</div>
  <p>Run these <strong>on the droplet</strong> if WSL is unavailable and your latest code is already on GitHub:</p>
  <div class="code-wrap">
    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
    <div class="code-box">ssh root@64.225.120.72

cd /var/www/getthebag.io
git fetch origin
git reset --hard origin/main

nginx -t &amp;&amp; systemctl reload nginx

ls -l /var/www/getthebag.io/index.html</div>
  </div>

  <hr>

  <!-- Nginx quick commands -->
  <div class="section-label">On droplet — Nginx quick commands</div>
  <div class="code-wrap">
    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
    <div class="code-box">ssh root@64.225.120.72

cd /var/www/getthebag.io
ls

nginx -t &amp;&amp; systemctl reload nginx

curl -I https://getthebag.io/ | head -n1</div>
  </div>

  <hr>

  <!-- Manual payout script -->
  <div class="section-label">BAG XRPL payout helper (manual)</div>
  <p>This is a <strong>manual send helper</strong> from your BAG codebase. It is <strong>not</strong> an always-on OTC engine.</p>
  <p>Run from <code>~/bagtoken</code> on WSL with your Python venv activated:</p>
  <div class="code-wrap">
    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
    <div class="code-box">cd ~/bagtoken
source .venv/bin/activate

python send_manual_payout.py \
  --dest &lt;DESTINATION_ADDRESS&gt; \
  --usd 1.00</div>
  </div>
  <p>Change <code>&lt;DESTINATION_ADDRESS&gt;</code> and <code>--usd</code> as needed. Use only when you explicitly want to send BAG from Treasury.</p>

  <hr>

  <!-- XRPL wallet config -->
  <div class="section-label">$BAG XRPL wallet config</div>
  <p>Confirmed live setup:</p>

  <table>
    <tr>
      <th>Wallet</th>
      <th>Address</th>
      <th>Holding</th>
      <th>Role</th>
      <th>Notes</th>
    </tr>
    <tr>
      <td>Mint / Issuer</td>
      <td><code>rNeYbfb9EDV8c7mNfUuooEEYYzMcEuDFbr</code></td>
      <td>-1T BAG (supply view only)</td>
      <td>Mint authority</td>
      <td>DefaultRipple ON, <strong>no self-trustline</strong> (cannot ripple BAG)</td>
    </tr>
    <tr>
      <td>Treasury</td>
      <td><code>raoC1r3rTXzG5qppic6VYCqqY87fFcUJch</code></td>
      <td>700B BAG</td>
      <td>Allocations / rewards / distributions</td>
      <td>DefaultRipple ON, all BAG sends originate here when you decide</td>
    </tr>
    <tr>
      <td>Reserve</td>
      <td><code>rJZQH85kH4mMiASm7BxdmjorBonvLeDfrR</code></td>
      <td>200B BAG</td>
      <td>Long-term holdings</td>
      <td>DefaultRipple ON, runway / burns / reserves</td>
    </tr>
    <tr>
      <td>Liquidity</td>
      <td><code>rQBXxZ7PwTHF3oFDQ8qhZtizvv2kiMcw17</code></td>
      <td>100B BAG</td>
      <td>AMM / DEX seed</td>
      <td>DefaultRipple ON, ready to pair with XRP at launch</td>
    </tr>
  </table>

  <p><strong>Summary:</strong></p>
  <ul>
    <li>DefaultRipple ON for all four (needed for Xaman / trustlines).</li>
    <li>Issuer has no self-trustline → cannot accidentally hold or ripple BAG.</li>
    <li>Treasury / Reserve / Liquidity each hold their final allocations.</li>
  </ul>

  <hr>

  <!-- Tokenomics quick reference -->
  <div class="section-label">$BAG tokenomics quick reference</div>
  <ul>
    <li>Total supply: <strong>1,000,000,000,000 BAG</strong> (1T)</li>
    <li>Decimals: <strong>6</strong></li>
    <li>Distribution:
      <ul>
        <li>Treasury: 700B — allocations / rewards / distributions</li>
        <li>Reserve: 200B — long-term / runway / burns</li>
        <li>Liquidity: 100B — AMM / DEX</li>
      </ul>
    </li>
  </ul>

  <hr>

  <!-- Env vars / secrets map (no values) -->
  <div class="section-label">Environment variables / secrets map</div>
  <p>Values live in <code>.env</code>, systemd env blocks, or your password manager. This is just the map — no secrets here.</p>

  <div class="code-wrap">
    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
    <div class="code-box"># Node / app
NODE_ENV=production

# XRPL core
XRPL_RPC_URL=&lt;https://xrplcluster or rippled endpoint&gt;
BAG_ISSUER=rNeYbfb9EDV8c7mNfUuooEEYYzMcEuDFbr
BAG_CURRENCY=BAG

# XRPL wallet refs (if app needs them)
BAG_TREASURY_WALLET=raoC1r3rTXzG5qppic6VYCqqY87fFcUJch
BAG_RESERVE_WALLET=rJZQH85kH4mMiASm7BxdmjorBonvLeDfrR
BAG_LIQUIDITY_WALLET=rQBXxZ7PwTHF3oFDQ8qhZtizvv2kiMcw17

# Internal app keys
BAG_API_KEY=&lt;your BAG internal API key&gt;

# Third-party APIs
BAG_BITHOMP_API_KEY=&lt;your Bithomp API key&gt;
XAMAN_API_KEY=&lt;your Xaman API key&gt;
XAMAN_API_SECRET=&lt;your Xaman API secret&gt;
SPOTIFY_CLIENT_ID=&lt;if used&gt;
SPOTIFY_CLIENT_SECRET=&lt;if used&gt;

# Infra / automation (if you use CI/CD / API control)
DO_API_TOKEN=&lt;DigitalOcean API token&gt;
GITHUB_TOKEN=&lt;GitHub PAT for CI/CD if used&gt;</div>
  </div>

  <hr>

  <!-- SSH keys -->
  <div class="section-label">SSH keys — dev & server</div>
  <p><strong>Dev (WSL) key</strong></p>
  <ul>
    <li>Path: <code>~/.ssh/id_ed25519</code></li>
    <li>Public key added to GitHub and to the BAG droplet <code>authorized_keys</code>.</li>
  </ul>

  <p><strong>Server deploy key (legacy)</strong></p>
  <ul>
    <li>Path (old pattern): <code>/home/deploy/.ssh/id_ed25519</code></li>
    <li>Only needed if you go back to a non-root deploy user.</li>
  </ul>

  <hr>

  <!-- SSL / Cloudflare -->
  <div class="section-label">SSL / Cloudflare origin cert (BAG)</div>
  <p>Your Cloudflare origin cert + key for <code>getthebag.io</code> live under:</p>
  <div class="code-wrap">
    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
    <div class="code-box">ls -l /etc/ssl/cloudflare
# expect:
# getthebag_origin.pem
# getthebag_origin.key</div>
  </div>
  <p>Both owned by <code>root:root</code> and <code>chmod 600</code>. Do <strong>not</strong> copy PEM or key into this runbook.</p>

  <hr>

  <!-- Xaman deeplink -->
  <div class="section-label">Xaman (Xumm) deeplink pattern</div>
  <p>For BAG tools you’re using Xaman deeplinks. Pattern looks like:</p>
  <div class="code-wrap">
    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
    <div class="code-box">https://xumm.app/detect/pay/&lt;DESTINATION_ADDRESS&gt;?txjson=&lt;URL_ENCODED_TX_JSON&gt;</div>
  </div>
  <p>Keep the exact live deeplink URL in your <code>Xaman Deeplink.txt</code> reference file, not in this runbook.</p>

</div>

<script>
function copyCode(btn){
  const wrap = btn.closest('.code-wrap');
  const codeBox = wrap.querySelector('.code-box');
  const text = codeBox.innerText;
  navigator.clipboard.writeText(text).then(() => {
    const original = btn.textContent;
    btn.textContent = 'Copied';
    setTimeout(() => { btn.textContent = original; }, 1200);
  }).catch(() => {
    alert('Copy failed. You can copy manually.');
  });
}
</script>

</body>
</html>
